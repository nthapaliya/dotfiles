#! /bin/bash

hfile=~/Library/Caches/Homebrew/.updated

if [[ -f $hfile ]] ; then
  time_diff=$(( $( date +%s ) - $( date -r "$hfile" +%s ) ))
else
  time_diff=999999999
fi

if [[ $time_diff -lt $(( 4 * 60 * 60 )) ]]; then
  exit
fi

touch $hfile

commands=( \
  'brew update' \
  'brew upgrade' \
  # 'brew cleanup' \
  'brew cask outdated' \
  # 'brew cask upgrade' \
  'nvim +PlugUpgrade +PlugUpdate' \
  )

for command in "${commands[@]}"; do
  echo "$command" && $command
done
