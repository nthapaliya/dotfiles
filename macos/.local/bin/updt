#! /bin/bash

hfile=~/.brew_update_history
last_update=$( tail -1 $hfile )
current_date=$( date +%F )

if [[ "$last_update" == "$current_date" ]]; then
  exit
fi

echo "$current_date" >> $hfile

commands=( \
  'brew update' \
  'brew upgrade' \
  # 'brew cleanup' \
  'brew cask outdated' \
  # 'brew cask upgrade' \
  'nvim +PlugUpgrade +PlugUpdate' \
  )

for command in "${commands[@]}"; do
  echo "$command" && $command
done
