" .vimrc
"
" vim-plug auto-install and plugin list
"
if empty(glob('~/.vim/autoload/plug.vim'))
  silent !curl -fLo ~/.vim/autoload/plug.vim --create-dirs
        \ https://raw.githubusercontent.com/junegunn/vim-plug/master/plug.vim
  autocmd VimEnter * PlugInstall
endif

call plug#begin('~/.vim/plugged')

Plug 'bling/vim-airline'
Plug 'bling/vim-bufferline'

Plug 'junegunn/fzf', { 'dir': '~/.fzf', 'do': 'yes \| ./install' }
Plug 'scrooloose/syntastic'

Plug 'tpope/vim-sensible'
Plug 'tpope/vim-fugitive'
Plug 'tpope/vim-surround'
Plug 'tpope/vim-rails'
Plug 'tpope/vim-repeat'
Plug 'tpope/vim-commentary'
Plug 'tpope/vim-dispatch'

Plug 'janko-m/vim-test'
Plug 'christoomey/vim-tmux-navigator'
Plug 'ludovicchabant/vim-gutentags'
Plug 'wikitopian/hardmode'

Plug 'altercation/vim-colors-solarized'
Plug 'kien/ctrlp.vim'
Plug 'vim-ruby/vim-ruby'
" Plug 'fatih/vim-go'

call plug#end()
" Simple tweaks
syntax on
syntax enable
filetype plugin indent on

set shell=$SHELL
set background=dark
set number
set nocompatible
set smartcase
set title
set visualbell           " don't beep
set noerrorbells         " don't beep
set hidden
set cursorline

" let g:ctrlp_by_filename = 1

" set list
" set listchars=trail:⋅,nbsp:⋅,tab:▸\ ,eol:¬

" my custom mappings
let mapleader = "\<Space>"
inoremap jk <esc>
"inoremap <esc> <nop>
nnoremap <leader>ev :e $MYVIMRC<cr>
nnoremap <leader>sv :source $MYVIMRC<cr>
nnoremap <leader>wq :wq<cr>
nnoremap <leader>w :w<cr>

nnoremap <left> :bn<cr>
nnoremap <right> :bp<cr>

nnoremap <leader>n :bn<CR>
nnoremap <leader>p  :bp<CR>
nnoremap <leader>j  ddp
nnoremap <leader>k dd2kp

nnoremap <enter> o<esc>

if has('nvim')
  tnoremap <Leader>e <C-\><C-n>
endif

" vim-go
" let g:go_fmt_command = "goimports"
" let g:go_highlight_functions = 1
" let g:go_highlight_methods = 1
" let g:go_highlight_structs = 1
" let g:go_highlight_operators = 1
" let g:go_highlight_build_constraints = 1
" " let vim-go play nice with dispatch
" let g:go_dispatch_enabled = 1

let g:bufferline_echo = 0
let g:airline_theme = 'badwolf'

let g:airline_left_sep = ' '
let g:airline_right_sep = ' '

let g:airline_symbols = {}
let g:airline_symbols.linenr = '␤'
let g:airline_symbols.branch = '⎇'
let g:airline_symbols.paste = '∥'
let g:airline_symbols.whitespace = 'Ξ'

" Colorscheme etc
colorscheme solarized

" tab-settings
set ts=2 sts=2 sw=2 expandtab

set clipboard^=unnamed "adds unnamed to existing values

" vim-test
nmap <silent> <leader>t :TestNearest<CR>
nmap <silent> <leader>T :TestFile<CR>
nmap <silent> <leader>a :TestSuite<CR>
nmap <silent> <leader>l :TestLast<CR>
nmap <silent> <leader>g :TestVisit<CR>
" make test commands execute using dispatch.vim
let test#strategy = "dispatch"
